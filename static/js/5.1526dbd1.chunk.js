(this.webpackJsonprallytrip=this.webpackJsonprallytrip||[]).push([[5],{177:function(e,t,c){},178:function(e,t,c){},186:function(e,t,c){"use strict";c.r(t);var n=c(9),a=c(1),r=c(53),i=c(97),s=c(57),l=c(75),o=c(103),u=c(83),d=c(84),b=c.n(d),j=c(64),p=c.n(j),f=(c(177),c(0)),h=function(e){var t=e.product,c=e.uploadedImage,r=e.register,i=Object(a.useState)(),s=Object(n.a)(i,2),l=s[0],o=s[1];return Object(a.useEffect)((function(){var e;c&&c.length&&c[0]instanceof Blob?(e=c[0],new Promise((function(t,c){var n=new FileReader;n.onload=function(){2===n.readyState&&t(n.result)},e instanceof Blob?n.readAsDataURL(e):c("error - the function requires a Blob or File in order to convert to base64")}))).then((function(e){return o(e)})).catch((function(e){return console.log(e)})):t&&t.image?o(t.image):o("")}),[t,c]),Object(f.jsxs)("div",{style:{display:"flex",alignItems:"flex-end"},children:[Object(f.jsxs)("div",{className:"img-preview-container",children:[Object(f.jsx)("div",{className:"img-placeholder",children:"\u05d0\u05d9\u05df \u05ea\u05de\u05d5\u05e0\u05d4"}),l?Object(f.jsx)("img",{src:l,alt:"preview",className:"img-preview"}):null]}),Object(f.jsxs)("div",{children:[Object(f.jsx)("input",{type:"file",ref:r,name:"image",id:"file",className:"inputfile",accept:"image/*"}),Object(f.jsxs)("label",{htmlFor:"file",className:"button",style:{display:"inline-block",marginRight:"5px"},children:[" ",l?"\u05d4\u05d7\u05dc\u05e3 \u05ea\u05de\u05d5\u05e0\u05d4":"\u05d4\u05e2\u05dc\u05d0\u05ea \u05ea\u05de\u05d5\u05e0\u05d4"," "]})]})]})};var O=c(19),m=(c(178),function(e){var t=e.setDialogContent,c=e.dialogContent;return c?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)("div",{className:"dialog",children:[Object(f.jsx)("div",{children:c}),Object(f.jsx)("button",{className:"confirm",onClick:function(){return t((function(e){return!e}))},children:"\u05d0\u05d9\u05e9\u05d5\u05e8"})]}),Object(f.jsx)(O.a,{setWindowOpen:t})]}):null}),g=c(11),x={toolbar:[[{size:["small",!1,"large","huge"]}],["bold","italic","underline","strike"],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],[{direction:"rtl"},{align:[]}],[{color:[]},{background:[]}],["link","image","video"],["clean"]]},v=["size","bold","italic","underline","strike","list","bullet","indent","link","image","video","direction","color","background","align"],y=(c(96),c(79),["image"]),N=g.a.map((function(e){return Object(f.jsx)("option",{value:e.path.slice(e.path.lastIndexOf("/")+1),children:e.name},e.path)}));function k(e,t,c){return w.apply(this,arguments)}function w(){return(w=Object(u.a)(b.a.mark((function e(t,c,n){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,a){var i=r.c.ref().child("products/".concat(t,"/").concat(n,".png")).put(c);i.on("state_changed",(function(e){var t=e.bytesTransferred/e.totalBytes*100;console.log("Upload is "+t+"% done")}),(function(e){console.log(e),a()}),(function(){i.snapshot.ref.getDownloadURL().then((function(t){console.log("Uploaded image available at",t),e(t)}))}))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var S=function(e){var t=e.action,c=Object(i.a)(),d=c.register,j=c.handleSubmit,O=c.errors,w=c.watch,S=c.reset,q=Object(i.a)({defaultValues:{todo:"add"}}),C=q.register,E=q.watch,I=Object(a.useState)(""),F=Object(n.a)(I,2),D=F[0],A=F[1],P=Object(a.useState)([]),U=Object(n.a)(P,2),B=U[0],L=U[1],R=Object(a.useState)({}),z=Object(n.a)(R,2),W=z[0],H=z[1],J=Object(a.useState)([]),V=Object(n.a)(J,2),Y=V[0],G=V[1],K=Object(a.useState)([]),Q=Object(n.a)(K,2),T=Q[0],Z=Q[1],_=Object(a.useState)(),M=Object(n.a)(_,2),X=M[0],$=M[1],ee=Object(a.useState)(!1),te=Object(n.a)(ee,2),ce=te[0],ne=te[1],ae=Object(a.useState)(!1),re=Object(n.a)(ae,2),ie=re[0],se=re[1],le=E("category"),oe=E("subcategory"),ue=E("product-id"),de=w("category"),be=w("image"),je=function(){var e=Object(u.a)(b.a.mark((function e(t){var c,n,a,i,s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Upload proccess begun"),ne(!0),c=t.image,n=Object(o.a)(t,y),a=X,n.subcategory||(n.subcategory="sc"),a||(a=r.b.ref().child("products").push().key),!c[0]){e.next=13;break}return e.next=9,k(a,c[0],"image");case 9:i=e.sent,n.image=i,e.next=14;break;case 13:W[X]&&W[X].image&&(n.image=W[X].image);case 14:(s={})["/products/"+a]=n,s["/quill/"+a]=D,r.b.ref().update(s,(function(e){e?(ne(!1),se("\u05ea\u05e7\u05dc\u05d4 :"+e)):(ne(!1),se("\u05d4\u05d4\u05e2\u05dc\u05d0\u05d4 \u05d1\u05d5\u05e6\u05e2\u05d4 \u05d1\u05d4\u05e6\u05dc\u05d7\u05d4"),X||(S({}),A('<p class="ql-align-right ql-direction-rtl"><br></p>')),$())}));case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){if(X){var e=W[X],t=e.title,c=void 0===t?"":t,n=e.description,a=void 0===n?"":n,i=e.price,s=void 0===i?0:i,l=e.stock,o=void 0===l?0:l,u=e.category,d=void 0===u?"":u,b=e.subcategory,j=void 0===b?"":b,p=e.priority,f=void 0===p?0:p,h=e.hide,O=void 0!==h&&h,m=e.discount;S({title:c,description:a,price:s,stock:o,category:d,subcategory:j,priority:f,hide:O,discount:void 0===m?"":m}),r.b.ref("quill/".concat(X)).once("value",(function(e){null!=e.val()&&A(e.val())}))}else S({}),A('<p class="ql-align-right ql-direction-rtl"><br></p>')}),[X,W,S]),Object(a.useEffect)((function(){"update product"===t&&0===Object.keys(W).length&&W.constructor===Object&&r.b.ref().child("products").on("value",(function(e){null!=e.val()&&H(Object(l.a)({},e.val()))})),"add product"===t&&$()}),[t,W,S]),Object(a.useEffect)((function(){var e=Object.keys(W).filter((function(e){return!le||le===W[e].category&&!oe||oe===W[e].subcategory})).map((function(e){return Object(f.jsx)("option",{value:e,children:W[e].title},e)}));L(Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("label",{children:"\u05e9\u05dd \u05de\u05d5\u05e6\u05e8: "}),Object(f.jsx)("select",{name:"product-id",ref:C({required:!0}),children:e})]}))}),[le,oe,W,C]),Object(a.useEffect)((function(){g.a.forEach((function(e){e.path.includes(le)&&(e.routes.length?G(Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("label",{children:"\u05ea\u05ea \u05e7\u05d8\u05d2\u05d5\u05e8\u05d9\u05d4: "}),Object(f.jsx)("select",{name:"subcategory",ref:C({required:!0}),children:e.routes.map((function(e){return Object(f.jsx)("option",{value:e.path.slice(e.path.lastIndexOf("/")+1),children:e.name},e.path)}))})]})):G([]))}))}),[le,C]),Object(a.useEffect)((function(){g.a.forEach((function(e){e.path.includes(de)&&(e.routes.length?Z(Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("label",{children:" \u05ea\u05ea \u05e7\u05d8\u05d2\u05d5\u05e8\u05d9\u05d4:  "}),Object(f.jsx)("select",{name:"subcategory",ref:d({required:!0}),children:e.routes.map((function(e){return Object(f.jsx)("option",{value:e.path.slice(e.path.lastIndexOf("/")+1),children:e.name},e.path)}))}),O.subcategory&&Object(f.jsx)("span",{className:"error",children:"\u05d9\u05e9 \u05dc\u05e6\u05d9\u05d9\u05df \u05ea\u05ea \u05e7\u05d8\u05d2\u05d5\u05e8\u05d9\u05d4"})]})):Z([]))}))}),[de,d,O.subcategory]),Object(f.jsxs)("article",{children:[Object(f.jsx)(m,{dialogContent:ie,setDialogContent:se}),Object(f.jsx)("form",{className:"form--compressed",children:"update product"===t?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("h3",{children:"\u05d1\u05d7\u05d9\u05e8\u05ea \u05de\u05d5\u05e6\u05e8 \u05dc\u05e2\u05e8\u05d9\u05db\u05d4/\u05de\u05d7\u05d9\u05e7\u05d4"}),Object(f.jsx)("label",{children:"\u05e7\u05d8\u05d2\u05d5\u05e8\u05d9\u05d4: "}),Object(f.jsx)("select",{name:"category",ref:C({required:!0}),children:N}),Y,B,Object(f.jsx)("div",{children:Object(f.jsx)("button",{className:"button green",type:"button",onClick:function(){return $(ue)},children:"\u05e2\u05e8\u05d5\u05da \u05de\u05d5\u05e6\u05e8 \u05e0\u05d1\u05d7\u05e8"})})]}):null}),"update product"!==t||X?Object(f.jsxs)("form",{onSubmit:j(je),className:"form",children:[Object(f.jsx)("h2",{style:{paddingBottom:"10px"},children:X?'\u05e2\u05d3\u05db\u05d5\u05df \u05de\u05d5\u05e6\u05e8 "'.concat(W[X].title,'"'):"\u05d4\u05d5\u05e1\u05e4\u05ea \u05de\u05d5\u05e6\u05e8"}),Object(f.jsx)("label",{children:"\u05db\u05d5\u05ea\u05e8\u05ea"}),Object(f.jsx)("input",{type:"text",name:"title",ref:d({required:!0}),placeholder:"\u05db\u05d5\u05ea\u05e8\u05ea"}),O.title&&Object(f.jsx)("span",{className:"error",children:"\u05d9\u05e9 \u05dc\u05d4\u05db\u05e0\u05d9\u05e1 \u05db\u05d5\u05ea\u05e8\u05ea"}),Object(f.jsx)("label",{children:"\u05de\u05d7\u05d9\u05e8"}),Object(f.jsx)("input",{type:"number",name:"price",ref:d({required:!0}),placeholder:"\u05de\u05d7\u05d9\u05e8"}),O.price&&Object(f.jsx)("span",{className:"error",children:'\u05d9\u05e9 \u05dc\u05e6\u05d9\u05d9\u05df \u05de\u05d7\u05d9\u05e8. \u05db\u05d3\u05d9 \u05e9\u05d9\u05d5\u05e4\u05d9\u05e2 "\u05e6\u05d5\u05e8 \u05e7\u05e9\u05e8 \u05dc\u05e7\u05d1\u05dc\u05ea \u05de\u05d7\u05d9\u05e8", \u05d9\u05e9 \u05dc\u05e6\u05d9\u05d9\u05df \u05de\u05d7\u05d9\u05e8 0'}),Object(f.jsx)("label",{children:"\u05de\u05d7\u05d9\u05e8 \u05de\u05d1\u05e6\u05e2"}),Object(f.jsx)("input",{type:"text",name:"discount",ref:d,placeholder:"\u05de\u05d7\u05d9\u05e8 \u05de\u05d1\u05e6\u05e2"}),Object(f.jsx)("label",{children:"\u05ea\u05d9\u05d0\u05d5\u05e8"}),Object(f.jsx)("textarea",{name:"description",ref:d,placeholder:"\u05ea\u05d9\u05d0\u05d5\u05e8"}),Object(f.jsx)("label",{children:"\u05e7\u05d8\u05d2\u05d5\u05e8\u05d9\u05d4"}),Object(f.jsx)("select",{name:"category",ref:d({required:!0}),children:N}),T,Object(f.jsx)("label",{children:"\u05de\u05dc\u05d0\u05d9"}),Object(f.jsx)("input",{type:"number",name:"stock",ref:d({required:!0}),placeholder:"\u05de\u05dc\u05d0\u05d9"}),O.stock&&Object(f.jsx)("span",{className:"error",children:"\u05d9\u05e9 \u05dc\u05d4\u05db\u05e0\u05d9\u05e1 \u05de\u05e1\u05e4\u05e8 \u05de\u05d5\u05e6\u05e8\u05d9\u05dd \u05d1\u05de\u05dc\u05d0\u05d9"}),Object(f.jsx)("label",{children:" \u05e2\u05d3\u05d9\u05e4\u05d5\u05ea (\u05de\u05d5\u05e6\u05e8 \u05d1\u05e2\u05dc \u05e2\u05e8\u05da \u05d2\u05d1\u05d5\u05d4 \u05d9\u05d5\u05e6\u05d2 \u05d9\u05d5\u05ea\u05e8 \u05dc\u05de\u05e2\u05dc\u05d4)"}),Object(f.jsx)("input",{type:"number",name:"priority",ref:d,placeholder:"\u05e2\u05d3\u05d9\u05e4\u05d5\u05ea"}),Object(f.jsx)("label",{children:" \u05d4\u05e1\u05ea\u05e8 \u05de\u05d5\u05e6\u05e8 "}),Object(f.jsx)("input",{type:"checkbox",name:"hide",ref:d}),Object(f.jsx)("label",{children:"\u05ea\u05de\u05d5\u05e0\u05d4"}),Object(f.jsx)(h,{product:W[X],uploadedImage:be,register:d}),Object(f.jsx)("label",{style:{padding:"5px 0px 7px"},children:"\u05de\u05d9\u05d3\u05e2 \u05e0\u05d5\u05e1\u05e3"}),Object(f.jsx)(p.a,{theme:"snow",value:D,onChange:A,modules:x,formats:v}),Object(f.jsxs)("div",{children:[Object(f.jsx)("input",{type:"submit",value:"add product"===t?"\u05d4\u05e2\u05dc\u05d4 \u05de\u05d5\u05e6\u05e8":"\u05e9\u05de\u05d5\u05e8 \u05e9\u05d9\u05e0\u05d5\u05d9\u05d9\u05dd",className:"button green big"}),X?Object(f.jsx)("button",{className:"button red big",type:"button",onClick:function(){if(window.confirm('\u05d0\u05ea\u05d4 \u05e2\u05d5\u05de\u05d3 \u05dc\u05de\u05d7\u05d5\u05e7 \u05d0\u05ea \u05d4\u05de\u05d5\u05e6\u05e8 "'.concat(W[X].title,'". \u05d4\u05d0\u05dd \u05d0\u05ea\u05d4 \u05d1\u05d8\u05d5\u05d7?'))){ne(!0),W[X]&&W[X].image&&r.c.refFromURL(W[X].image).delete().then((function(){console.log("image deleted successfully!")})).catch((function(e){console.log("error in deleting image:"+e)}));var e={};e["/products/"+X]=null,e["/quill/"+X]=null,$(),r.b.ref().update(e,(function(e){e?(ne(!1),se("\u05ea\u05e7\u05dc\u05d4 :"+e)):(ne(!1),se("\u05d4\u05de\u05d5\u05e6\u05e8 \u05e0\u05de\u05d7\u05e7 \u05d1\u05d4\u05e6\u05dc\u05d7\u05d4"))}))}},children:"\u05de\u05d7\u05e7 \u05de\u05d5\u05e6\u05e8"}):null]})]}):null,ce?Object(f.jsx)(s.a,{fullscreen:!0}):null]})},q=function(){var e=Object(a.useState)('<p class="ql-align-right ql-direction-rtl"><br></p>'),t=Object(n.a)(e,2),c=t[0],i=t[1],l=Object(a.useState)(!1),o=Object(n.a)(l,2),u=o[0],d=o[1],b=Object(a.useState)(!1),j=Object(n.a)(b,2),h=j[0],O=j[1];return Object(a.useEffect)((function(){r.b.ref("abroad").on("value",(function(e){null!=e.val()&&i(e.val())}))}),[]),Object(f.jsxs)("article",{className:"abroad-edit",children:[Object(f.jsxs)("div",{children:[Object(f.jsx)(p.a,{theme:"snow",value:c,onChange:i,modules:x,formats:v}),Object(f.jsx)("button",{className:"button green big",onClick:function(){return d(!0),void r.b.ref().update({abroad:c},(function(e){e?(d(!1),O("\u05ea\u05e7\u05dc\u05d4 :"+e)):(d(!1),O("\u05d4\u05e2\u05d3\u05db\u05d5\u05df \u05d1\u05d5\u05e6\u05e2 \u05d1\u05d4\u05e6\u05dc\u05d7\u05d4"))}))},children:"\u05e2\u05d3\u05db\u05df"})]}),u?Object(f.jsx)(s.a,{fullscreen:!0}):null,Object(f.jsx)(m,{dialogContent:h,setDialogContent:O})]})};t.default=function(){var e=Object(i.a)(),t=e.register,c=e.handleSubmit,l=e.errors,o=e.setError,u=e.clearErrors,d=Object(i.a)(),b=d.register,j=d.watch,p=Object(a.useState)(!1),h=Object(n.a)(p,2),O=h[0],m=h[1],g=Object(a.useState)(!1),x=Object(n.a)(g,2),v=x[0],y=x[1],N=j("action"),k=null;return Object(a.useEffect)((function(){r.a.onAuthStateChanged((function(e){e?(console.log("You are logged in!"),m(e)):(console.log("No user is logged in."),m(!1))}))}),[]),"add product"===N||"update product"===N?k=Object(f.jsx)(S,{action:N}):"set rally abroad"===N&&(k=Object(f.jsx)(q,{})),O?Object(f.jsxs)("article",{className:"page-container",children:[Object(f.jsx)("h2",{children:"\u05e2\u05de\u05d5\u05d3 \u05de\u05e0\u05d4\u05dc"}),Object(f.jsx)("button",{className:"button",onClick:function(){r.a.signOut().then((function(){console.log("signed out successfully")})).catch((function(e){console.log(e)}))},children:"\u05d4\u05ea\u05e0\u05ea\u05e7"}),Object(f.jsxs)("form",{className:"form--compressed",children:[Object(f.jsx)("input",{name:"action",type:"radio",value:"add product",ref:b}),Object(f.jsx)("label",{children:"\u05de\u05d5\u05e6\u05e8 \u05d7\u05d3\u05e9"}),Object(f.jsx)("input",{name:"action",type:"radio",value:"update product",ref:b}),Object(f.jsx)("label",{children:"\u05e2\u05e8\u05d9\u05db\u05ea \u05de\u05d5\u05e6\u05e8"}),Object(f.jsx)("input",{name:"action",type:"radio",value:"set rally abroad",ref:b}),Object(f.jsx)("label",{children:'\u05e2\u05e8\u05d9\u05db\u05ea \u05ea\u05d5\u05db\u05df \u05e8\u05d0\u05dc\u05d9\u05d9\u05dd \u05d1\u05d7\u05d5"\u05dc'})]}),k]}):Object(f.jsx)("article",{className:"page-container",children:Object(f.jsxs)("form",{onSubmit:c((function(e){var t,c=e.email,n=e.password,a=e.persistence;y(!0),t=!0===a?r.d.auth.Auth.Persistence.LOCAL:r.d.auth.Auth.Persistence.NONE,r.a.setPersistence(t).then((function(){return r.a.signInWithEmailAndPassword(c,n)})).then(y(!1)).catch((function(e){console.log("Error code: ".concat(e.code)),console.log("Error message: ".concat(e.message)),o("login",{type:"manual",message:"\u05d0\u05d9\u05de\u05d9\u05d9\u05dc \u05d0\u05d5 \u05e1\u05d9\u05e1\u05de\u05d4 \u05e9\u05d2\u05d5\u05d9\u05d9\u05dd"})}))})),className:"form small",children:[Object(f.jsx)("h2",{style:{padding:"0px 0px 10px"},children:"\u05db\u05e0\u05d9\u05e1\u05ea \u05de\u05e0\u05d4\u05dc"}),Object(f.jsx)("label",{children:"\u05d0\u05d9\u05de\u05d9\u05d9\u05dc"}),Object(f.jsx)("input",{type:"text",name:"email",ref:t({required:!0}),placeholder:"\u05d0\u05d9\u05de\u05d9\u05d9\u05dc"}),l.email&&Object(f.jsx)("span",{className:"error",children:"\u05d9\u05e9 \u05dc\u05d4\u05db\u05e0\u05d9\u05e1 \u05d0\u05d9\u05de\u05d9\u05d9\u05dc"}),Object(f.jsx)("label",{children:"\u05e1\u05d9\u05e1\u05de\u05d0"}),Object(f.jsx)("input",{type:"password",name:"password",ref:t({required:!0}),placeholder:"\u05e1\u05d9\u05e1\u05de\u05d0"}),l.password&&Object(f.jsx)("span",{className:"error",children:"\u05d9\u05e9 \u05dc\u05d4\u05db\u05e0\u05d9\u05e1 \u05e1\u05d9\u05e1\u05de\u05d0"}),Object(f.jsxs)("div",{children:[Object(f.jsx)("input",{type:"checkbox",name:"persistence",defaultChecked:!0,ref:t}),Object(f.jsx)("label",{children:"\u05d4\u05d9\u05e9\u05d0\u05e8 \u05de\u05d7\u05d5\u05d1\u05e8"})]}),v?Object(f.jsx)(s.a,{}):Object(f.jsx)("input",{type:"submit",value:"\u05d4\u05ea\u05d7\u05d1\u05e8",className:"button",onClick:function(){return u("login")}}),l.login&&Object(f.jsx)("span",{className:"error",children:l.login.message})]})})}},53:function(e,t,c){"use strict";c.d(t,"b",(function(){return r})),c.d(t,"a",(function(){return i})),c.d(t,"c",(function(){return s}));var n=c(55),a=c.n(n);c.d(t,"d",(function(){return a.a}));c(72),c(81),c(73),c(82);a.a.initializeApp({apiKey:"AIzaSyDukwIPf4Dq16dqVbw4SeoyWugUnPIhYFE",authDomain:"rally-trip.firebaseapp.com",databaseURL:"https://rally-trip.firebaseio.com",projectId:"rally-trip",storageBucket:"rally-trip.appspot.com",messagingSenderId:"981127527542",appId:"1:981127527542:web:d6bee115407fff00b1f357",measurementId:"G-3Q5HDZ04H2"}),a.a.analytics();var r=a.a.database(),i=a.a.auth(),s=a.a.storage()},57:function(e,t,c){"use strict";c(1);var n=c(19),a=(c(74),c(0));t.a=function(e){return e.fullscreen?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{className:"loader fullscreen",children:" "}),Object(a.jsx)(n.a,{})]}):Object(a.jsx)("div",{className:"loader"})}},74:function(e,t,c){},79:function(e,t,c){}}]);
//# sourceMappingURL=5.1526dbd1.chunk.js.map