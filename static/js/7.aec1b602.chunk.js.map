{"version":3,"sources":["containers/Admin/ImageUploader.js","components/Dialog/Dialog.js","containers/Admin/quillConfig.js","containers/Admin/ProductManager.js","containers/Admin/AbroadEdit.js","containers/Admin/Admin.js","firebase.js","components/Loader/Loader.js"],"names":["ImagesUpload","product","uploadedImage","register","useState","imageUrl","setImageUrl","useEffect","image","length","Blob","Promise","resolve","reject","reader","FileReader","onload","readyState","result","readAsDataURL","then","url","catch","err","console","log","style","display","alignItems","className","src","alt","type","ref","name","id","accept","htmlFor","marginRight","Dialog","setDialogContent","dialogContent","onClick","prevState","setWindowOpen","modules","toolbar","formats","categoriesOptions","links","map","link","key","path","value","slice","lastIndexOf","uploadTaskPromise","productId","file","a","uploadTask","fireStorage","child","put","on","snapshot","progress","bytesTransferred","totalBytes","error","getDownloadURL","downloadURL","ProductManager","action","useForm","handleSubmit","errors","watch","reset","defaultValues","todo","register2","watch2","editorValue","setEditorValue","productsOptions","setProductsOptions","productsInfo","setProductsInfo","subCatOptions","setSubCatOptions","subCatOptSelectedProd","setSubCatOptSelectedProd","currentProductId","setCurrentProductId","isLoading","setIsLoading","category","subcategory","selectedProductId","categorySelectedProd","onSubmit","data","productKey","fireDb","push","downloadUrl","updates","update","title","description","price","stock","once","val","Object","keys","constructor","productsTemp","filter","required","forEach","includes","routes","subLink","paddingBottom","placeholder","padding","theme","onChange","window","confirm","refFromURL","delete","Loader","fullscreen","AbroadEdit","abroad","Admin","setError","clearErrors","isSignedIn","setIsSignedIn","actionComponent","fireAuth","onAuthStateChanged","user","signOut","authPersistence","email","password","persistence","firebase","auth","Auth","Persistence","LOCAL","NONE","setPersistence","signInWithEmailAndPassword","code","message","defaultChecked","login","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","analytics","database","storage"],"mappings":"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","file":"static/js/7.aec1b602.chunk.js","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport './ImageUploader.css';\r\n\r\nconst ImagesUpload = ({ product, uploadedImage, register }) => {\r\n    const [imageUrl, setImageUrl] = useState();\r\n\r\n    useEffect(() => {\r\n        // If an image was uploaded by the user, it will be shown. otherwise, the current image in the storage will be shown.\r\n        if (uploadedImage && uploadedImage.length && uploadedImage[0] instanceof Blob) {\r\n            convertImageToBase64(uploadedImage[0])\r\n                .then(url => setImageUrl(url))\r\n                .catch(err => console.log(err))\r\n        } else if (product && product['image']) {\r\n            setImageUrl(product['image']);\r\n        } else {\r\n            setImageUrl('');\r\n        }\r\n    }, [product, uploadedImage])\r\n\r\n    return (\r\n        <div style = {{display: \"flex\", alignItems: 'flex-end'}}>\r\n            <div className='img-preview-container'>\r\n                <div className='img-placeholder'>\r\n                    אין תמונה\r\n                </div>\r\n                {imageUrl ? <img src={imageUrl} alt='preview' className='img-preview' /> : null}\r\n            </div>\r\n            <div>\r\n                <input type=\"file\" ref={register} name=\"image\" id=\"file\" className=\"inputfile\" accept=\"image/*\" />\r\n                <label htmlFor=\"file\" className=\"button\" style={{ display: 'inline-block', marginRight: '5px' }}> {imageUrl ? 'החלף תמונה' : 'העלאת תמונה'} </label>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default ImagesUpload;\r\n\r\n// This function gets an image and converts it to a url attachable to src attribute in img tags\r\nfunction convertImageToBase64(image) {\r\n    return new Promise((resolve, reject) => {\r\n        const reader = new FileReader();\r\n        reader.onload = () => {\r\n            if (reader.readyState === 2) {\r\n                resolve(reader.result);\r\n            }\r\n        }\r\n        if (image instanceof Blob) {\r\n            reader.readAsDataURL(image)\r\n        } else {\r\n            reject(\"error - the function requires a Blob or File in order to convert to base64\");\r\n        }\r\n    });\r\n}","import React from 'react';\r\nimport Backdrop from '../BackDrop/BackDrop';\r\nimport './Dialog.css';\r\n\r\nconst Dialog = ({ setDialogContent, dialogContent }) => {\r\n    if (dialogContent) {\r\n        return (\r\n            <>\r\n                <div className='dialog'>\r\n                    <div >\r\n                        {dialogContent}\r\n                    </div>\r\n                    <button className='confirm' onClick={() => setDialogContent((prevState) => !prevState)} >אישור</button>\r\n                </div>\r\n                <Backdrop setWindowOpen={setDialogContent} />\r\n            </>\r\n        );\r\n    } else {\r\n        return null;\r\n    }\r\n\r\n}\r\n\r\nexport default Dialog;\r\n","const modules = {\r\n    toolbar: [\r\n        [{ 'size': ['small', false, 'large', 'huge'] }],  // custom dropdown\r\n        ['bold', 'italic', 'underline', 'strike'],\r\n        [{ 'list': 'ordered' }, { 'list': 'bullet' }, { 'indent': '-1' }, { 'indent': '+1' }],\r\n        [{ 'direction': 'rtl' }, { 'align': [] }],                         // text direction\r\n        [{ 'color': [] }, { 'background': [] }],          // dropdown with defaults from theme\r\n        ['link', 'image', 'video'],\r\n        ['clean'],\r\n    ],\r\n}\r\n\r\nconst formats = [\r\n    'size',\r\n    'bold', 'italic', 'underline', 'strike',\r\n    'list', 'bullet', 'indent',\r\n    'link', 'image', 'video', 'direction',\r\n    'color', 'background', 'align'\r\n]\r\n\r\nexport { modules, formats }","import React, { useState, useEffect } from 'react';\r\nimport { useForm } from \"react-hook-form\"\r\nimport ReactQuill from 'react-quill';\r\nimport ImageUploader from './ImageUploader';\r\nimport Loader from '../../components/Loader/Loader';\r\nimport Dialog from '../../components/Dialog/Dialog';\r\nimport { links } from '../../links';\r\nimport { fireDb, fireStorage } from \"../../firebase\";\r\nimport { modules, formats } from './quillConfig'\r\nimport 'react-quill/dist/quill.snow.css';\r\nimport './Admin.css';\r\n\r\nconst categoriesOptions = links.map(link => <option key={link.path} value={link.path.slice(link.path.lastIndexOf('/') + 1)}>{link.name}</option>)\r\n\r\nconst ProductManager = ({ action }) => {\r\n\r\n    const { register, handleSubmit, errors, watch, reset } = useForm(); // The edited product form\r\n    const { register: register2, watch: watch2 } = useForm({ defaultValues: { todo: \"add\" } }); // The menu form\r\n\r\n    const [editorValue, setEditorValue] = useState(''); //Quill data\r\n    const [productsOptions, setProductsOptions] = useState([]) // The product's names to be shown in the select tag \r\n    const [productsInfo, setProductsInfo] = useState({}) // The information about all of the products fetched from firebase\r\n    const [subCatOptions, setSubCatOptions] = useState([]); // The sub categories options in the menu\r\n    const [subCatOptSelectedProd, setSubCatOptSelectedProd] = useState([]); // The sub categories options in the selected product\r\n    const [currentProductId, setCurrentProductId] = useState(); // The current edited product\r\n    const [isLoading, setIsLoading] = useState(false); // Loading indicator\r\n    const [dialogContent, setDialogContent] = useState(false); // Dialog handler\r\n\r\n    const category = watch2(\"category\");\r\n    const subcategory = watch2(\"subcategory\");\r\n    const selectedProductId = watch2(\"product-id\");\r\n    const categorySelectedProd = watch(\"category\");\r\n    const uploadedImage = watch(\"image\");\r\n\r\n    const onSubmit = async (data) => {\r\n        console.log(\"Upload proccess begun\");\r\n        setIsLoading(true);\r\n        let { image, ...product } = data;\r\n        let productKey = currentProductId;\r\n        if (!product.subcategory) { //if there is no sub category, the default will be 'sc' just to organize the data\r\n            product.subcategory = 'sc';\r\n        }\r\n        if (!productKey) { // if we are adding a new product and not editing, a new key will be generated.\r\n            productKey = fireDb.ref().child('products').push().key; // create a new product reference\r\n        }\r\n        if (image[0]) { // if there's an image it will be uploaded. The old image will be overwritten.\r\n            let downloadUrl = await uploadTaskPromise(productKey, image[0], 'image');\r\n            product.image = downloadUrl; // Add the downloadUrl to the new product's information\r\n        } else if (productsInfo[currentProductId] && productsInfo[currentProductId].image) { // if there isn't a new image, but there is an old image, keep the old one\r\n            product.image = productsInfo[currentProductId].image;\r\n        }\r\n        // Write the new products's data simultaneously in the products list and the quill list.\r\n        var updates = {};\r\n        updates['/products/' + productKey] = product;\r\n        updates['/quill/' + productKey] = editorValue;\r\n        fireDb.ref().update(updates, (error) => {\r\n            if (error) {\r\n                setIsLoading(false);\r\n                setDialogContent(\"תקלה :\" + error);\r\n            } else {\r\n                setIsLoading(false);\r\n                setDialogContent(\"ההעלאה בוצעה בהצלחה\");\r\n                setCurrentProductId();\r\n            }\r\n        });\r\n    }\r\n\r\n    const deleteProduct = () => {\r\n        if (window.confirm(`אתה עומד למחוק את המוצר \"${productsInfo[currentProductId].title}\". האם אתה בטוח?`)) {\r\n            setIsLoading(true);\r\n            if (productsInfo[currentProductId] && productsInfo[currentProductId].image) {\r\n                fireStorage.refFromURL(productsInfo[currentProductId].image)\r\n                    .delete()\r\n                    .then(() => {\r\n                        console.log('image deleted successfully!')\r\n                    }).catch((error) => {\r\n                        console.log(\"error in deleting image:\" + error);\r\n                    });\r\n            }\r\n            let updates = {};\r\n            updates['/products/' + currentProductId] = null;\r\n            updates['/quill/' + currentProductId] = null;\r\n            setCurrentProductId(); // reset the current product id state\r\n            fireDb.ref().update(updates, (error) => { // delete the product\r\n                if (error) {\r\n                    setIsLoading(false);\r\n                    setDialogContent(\"תקלה :\" + error);\r\n                } else {\r\n                    setIsLoading(false);\r\n                    setDialogContent(\"המוצר נמחק בהצלחה\")\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    // After the current product id changes, we will change the fields accordingly\r\n    useEffect(() => {\r\n        if (currentProductId) {\r\n            const { title = '', description = '', price = 0, stock = 0, category = '', subcategory = '' } = productsInfo[currentProductId]\r\n            reset({ title, description, price, stock, category, subcategory }) // insert product's values to the form fields\r\n            fireDb.ref(`quill/${currentProductId}`).once('value', snapshot => {\r\n                if (snapshot.val() != null) {\r\n                    setEditorValue(snapshot.val())\r\n                }\r\n            })\r\n        } else {\r\n            reset({}); //reset field values\r\n            setEditorValue('<p class=\"ql-align-right ql-direction-rtl\"><br></p>'); //reset quill value\r\n        }\r\n    }, [currentProductId, productsInfo, reset])\r\n\r\n\r\n    // This hook is used to fetch the information from firebase\r\n    useEffect(() => {\r\n        // make sure to only fetch the data from firebase if the user wants to update or delete AND it wasn't already fetched before\r\n        if (action === \"update product\" && Object.keys(productsInfo).length === 0 && productsInfo.constructor === Object) {\r\n            fireDb.ref().child('products').on('value', snapshot => {\r\n                if (snapshot.val() != null) {\r\n                    setProductsInfo({ ...snapshot.val() })\r\n                }\r\n            })\r\n        }\r\n        if (action === \"add product\") {\r\n            setCurrentProductId(); // reset the current product id\r\n        }\r\n    }, [action, productsInfo, reset])\r\n\r\n    // This hook is used for filtering\r\n    useEffect(() => {\r\n        let productsTemp = Object.keys(productsInfo)\r\n            .filter((id) => (!category ||\r\n                (category === productsInfo[id].category && !subcategory) ||\r\n                subcategory === productsInfo[id].subcategory))\r\n            .map(id => <option key={id} value={id}>{productsInfo[id].title}</option>)\r\n        setProductsOptions(<>\r\n            <label>שם מוצר: </label>\r\n            <select name=\"product-id\" ref={register2({ required: true })}>\r\n                {productsTemp}\r\n            </select>\r\n        </>);\r\n    }, [category, subcategory, productsInfo, register2])\r\n\r\n    // This hook is used to build the sub categories list\r\n    useEffect(() => {\r\n        links.forEach((link) => {\r\n            if (link.path.includes(category)) {\r\n                if (link.routes.length) {\r\n                    setSubCatOptions(<>\r\n                        <label>תת קטגוריה: </label>\r\n                        <select name=\"subcategory\" ref={register2({ required: true })}>\r\n                            {link.routes.map(subLink => <option key={subLink.path} value={subLink.path.slice(subLink.path.lastIndexOf('/') + 1)}>{subLink.name}</option>)}\r\n                        </select>\r\n                    </>\r\n                    )\r\n                } else {\r\n                    setSubCatOptions([]);\r\n                }\r\n            }\r\n        })\r\n    }, [category, register2])\r\n\r\n    // This hook is used to build the sub categories list in the selected product\r\n    useEffect(() => {\r\n        links.forEach((link) => {\r\n            if (link.path.includes(categorySelectedProd)) {\r\n                if (link.routes.length) {\r\n                    setSubCatOptSelectedProd(<>\r\n                        <label> תת קטגוריה:  </label>\r\n                        <select name=\"subcategory\" ref={register({ required: true })}>\r\n                            {link.routes.map(subLink => <option key={subLink.path} value={subLink.path.slice(subLink.path.lastIndexOf('/') + 1)}>{subLink.name}</option>)}\r\n                        </select>\r\n                    </>\r\n                    )\r\n                } else {\r\n                    setSubCatOptSelectedProd([]);\r\n                }\r\n            }\r\n        })\r\n    }, [categorySelectedProd, register])\r\n\r\n    return (\r\n        <article>\r\n            <Dialog dialogContent={dialogContent} setDialogContent={setDialogContent} />\r\n            <form className=\"form--compressed\">\r\n                {action === \"update product\" ?\r\n                    <>\r\n                        <h3>בחירת מוצר לעריכה/מחיקה</h3>\r\n                        <label>קטגוריה: </label>\r\n                        <select name=\"category\" ref={register2({ required: true })}>\r\n                            {categoriesOptions}\r\n                        </select>\r\n                        {subCatOptions}\r\n                        {productsOptions}\r\n                        <div>\r\n                            <button className='button green' type='button' onClick={() => setCurrentProductId(selectedProductId)}>ערוך מוצר נבחר</button>\r\n                        </div>\r\n                    </>\r\n                    : null}\r\n            </form>\r\n            {(action === 'update product' && !currentProductId) ? null : // If you chose update and there's no current product, dont show the form\r\n                <form onSubmit={handleSubmit(onSubmit)} className='form'>\r\n                    <h2 style={{ paddingBottom: '10px' }}>{currentProductId ? `עדכון מוצר \"${productsInfo[currentProductId].title}\"` : \"הוספת מוצר\"}</h2>\r\n                    <label>כותרת</label>\r\n                    <input type=\"text\" name=\"title\" ref={register({ required: true })} placeholder=\"כותרת\" />\r\n                    {errors.title && <span className=\"error\">יש להכניס כותרת</span>}\r\n                    <label>מחיר</label>\r\n                    <input type='number' name=\"price\" ref={register({ required: true })} placeholder=\"מחיר\" />\r\n                    {errors.price && <span className=\"error\">יש לציין מחיר. כדי שיופיע \"צור קשר לקבלת מחיר\", יש לציין מחיר 0</span>}\r\n                    <label>תיאור</label>\r\n                    <textarea name=\"description\" ref={register} placeholder=\"תיאור\" />\r\n                    <label>קטגוריה</label>\r\n                    <select name=\"category\" ref={register({ required: true })}>\r\n                        {categoriesOptions}\r\n                    </select>\r\n                    {subCatOptSelectedProd}\r\n                    <label>מלאי</label>\r\n                    <input type='number' name=\"stock\" ref={register({ required: true })} placeholder=\"מלאי\" />\r\n                    {errors.stock && <span className=\"error\">יש להכניס מספר מוצרים במלאי</span>}\r\n                    <label>תמונה</label>\r\n                    <ImageUploader product={productsInfo[currentProductId]} uploadedImage={uploadedImage} register={register} />\r\n                    <label style={{ padding: '5px 0px 7px' }}>מידע נוסף</label>\r\n                    <ReactQuill theme=\"snow\" value={editorValue} onChange={setEditorValue} modules={modules} formats={formats} />\r\n                    <div>\r\n                        <input type=\"submit\" value={action === 'add product' ? \"העלה מוצר\" : \"שמור שינויים\"} className='button green big' />\r\n                        {currentProductId ? <button className='button red big' type='button' onClick={deleteProduct}>מחק מוצר</button> : null}\r\n                    </div>\r\n                </form>}\r\n            {isLoading ? <Loader fullscreen /> : null}\r\n        </article>\r\n    );\r\n}\r\n\r\nasync function uploadTaskPromise(productId, file, name) {\r\n    return new Promise(function (resolve, reject) {\r\n        //Now we will upload the image and return the download url\r\n        let uploadTask = fireStorage.ref().child(`products/${productId}/${name}.png`).put(file); // upload \r\n        uploadTask.on('state_changed', (snapshot) => {\r\n            let progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\r\n            console.log('Upload is ' + progress + '% done');\r\n        }, (error) => {\r\n            console.log(error)\r\n            reject();\r\n        }, () => { //Success\r\n            uploadTask.snapshot.ref.getDownloadURL().then((downloadURL) => {\r\n                console.log('Uploaded image available at', downloadURL);\r\n                resolve(downloadURL)\r\n            });\r\n        })\r\n    });\r\n}\r\n\r\nexport default ProductManager;","import React, { useState, useEffect } from 'react';\r\nimport ReactQuill from 'react-quill';\r\nimport { fireDb } from '../../firebase'\r\nimport Loader from '../../components/Loader/Loader';\r\nimport Dialog from '../../components/Dialog/Dialog';\r\nimport { modules, formats } from './quillConfig'\r\nimport 'react-quill/dist/quill.snow.css';\r\nimport './Admin.css';\r\n\r\nconst AbroadEdit = () => {\r\n    const [editorValue, setEditorValue] = useState('<p class=\"ql-align-right ql-direction-rtl\"><br></p>'); //Quill data\r\n    const [isLoading, setIsLoading] = useState(false); // Loading indicator\r\n    const [dialogContent, setDialogContent] = useState(false); // Dialog handler\r\n\r\n    const onSubmit = () => {\r\n        setIsLoading(true)\r\n        let abroadRef = fireDb.ref()\r\n        abroadRef.update({ abroad: editorValue }, (error) => {\r\n            if (error) {\r\n                setIsLoading(false);\r\n                setDialogContent(\"תקלה :\" + error);\r\n            } else {\r\n                setIsLoading(false);\r\n                setDialogContent(\"העדכון בוצע בהצלחה\");\r\n            }\r\n        });\r\n    }\r\n\r\n\r\n    // reset the quill data to the current data\r\n    useEffect(() => {\r\n        fireDb.ref(`abroad`).on('value', snapshot => {\r\n            if (snapshot.val() != null) {\r\n                setEditorValue(snapshot.val())\r\n            }\r\n        })\r\n    }, [])\r\n\r\n\r\n    return (\r\n        <article className='abroad-edit'>\r\n            <div>\r\n                <ReactQuill theme=\"snow\" value={editorValue} onChange={setEditorValue} modules={modules} formats={formats} />\r\n                <button className='button green big' onClick={() => onSubmit()}>עדכן</button>\r\n            </div>\r\n            {isLoading ? <Loader fullscreen /> : null}\r\n            <Dialog dialogContent={dialogContent} setDialogContent={setDialogContent} />\r\n        </article>\r\n    );\r\n}\r\n\r\n\r\nexport default AbroadEdit;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { fireAuth, firebase } from '../../firebase'\r\nimport { useForm } from \"react-hook-form\";\r\nimport Loader from '../../components/Loader/Loader';\r\nimport ProductManager from './ProductManager';\r\nimport AbroadEdit from './AbroadEdit';\r\nimport './Admin.css';\r\n\r\nconst Admin = () => {\r\n    const { register, handleSubmit, errors, setError, clearErrors } = useForm();\r\n    const { register: register2, watch: watch2 } = useForm(); // The menu form\r\n    const [isSignedIn, setIsSignedIn] = useState(false);\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const action = watch2(\"action\");\r\n    let actionComponent = null;\r\n\r\n    const onSubmit = ({ email, password, persistence }) => {\r\n        setIsLoading(true);\r\n        let authPersistence;\r\n        if (persistence === true) {\r\n            authPersistence = firebase.auth.Auth.Persistence.LOCAL;\r\n        } else {\r\n            authPersistence = firebase.auth.Auth.Persistence.NONE\r\n        }\r\n        fireAuth.setPersistence(authPersistence)\r\n            .then(() => fireAuth.signInWithEmailAndPassword(email, password))\r\n            .then(setIsLoading(false))\r\n            .catch((error) => {\r\n                console.log(`Error code: ${error.code}`);\r\n                console.log(`Error message: ${error.message}`)\r\n                setError(\"login\", {\r\n                    type: \"manual\",\r\n                    message: \"אימייל או סיסמה שגויים\"\r\n                });\r\n            });\r\n    }\r\n\r\n    const signOut = () => {\r\n        fireAuth.signOut().then(function () {\r\n            console.log('signed out successfully')\r\n        }).catch(function (error) {\r\n            console.log(error)\r\n        });\r\n    }\r\n\r\n    useEffect(() => {\r\n        fireAuth.onAuthStateChanged(function (user) {\r\n            if (user) {\r\n                console.log('You are logged in!')\r\n                setIsSignedIn(user);\r\n            } else {\r\n                console.log('No user is logged in.')\r\n                setIsSignedIn(false);\r\n            }\r\n        });\r\n    }, [])\r\n\r\n    if (action === \"add product\" || action === \"update product\")\r\n        actionComponent = <ProductManager action={action} />\r\n    else if (action === \"set rally abroad\")\r\n        actionComponent = <AbroadEdit />\r\n\r\n\r\n    if (isSignedIn) {\r\n        return (\r\n            <article className='page-container'>\r\n                <h2>עמוד מנהל</h2>\r\n                <button className='button' onClick={signOut}>התנתק</button>\r\n                <form className=\"form--compressed\">\r\n                    <input name=\"action\" type=\"radio\" value=\"add product\" ref={register2} />\r\n                    <label>מוצר חדש</label>\r\n                    <input name=\"action\" type=\"radio\" value=\"update product\" ref={register2} />\r\n                    <label>עריכת מוצר</label>\r\n                    <input name=\"action\" type=\"radio\" value=\"set rally abroad\" ref={register2} />\r\n                    <label>עריכת תוכן ראליים בחו\"ל</label>\r\n                </form>\r\n                {actionComponent}\r\n            </article>\r\n        );\r\n    } else {\r\n        return (\r\n            <article className='page-container'>\r\n                <form onSubmit={handleSubmit(onSubmit)} className='form small'>\r\n                    <h2 style={{ padding: '0px 0px 10px' }}>כניסת מנהל</h2>\r\n                    <label>אימייל</label>\r\n                    <input type=\"text\" name=\"email\" ref={register({ required: true })} placeholder=\"אימייל\" />\r\n                    {errors.email && <span className=\"error\">יש להכניס אימייל</span>}\r\n                    <label>סיסמא</label>\r\n                    <input type='password' name=\"password\" ref={register({ required: true })} placeholder=\"סיסמא\" />\r\n                    {errors.password && <span className=\"error\">יש להכניס סיסמא</span>}\r\n                    <div>\r\n                        <input type=\"checkbox\" name=\"persistence\" defaultChecked={true} ref={register} />\r\n                        <label>הישאר מחובר</label>\r\n                    </div>\r\n                    {isLoading ?\r\n                        <Loader />\r\n                        : <input type=\"submit\" value=\"התחבר\" className=\"button\" onClick={() => clearErrors(\"login\")} />\r\n                    }\r\n                    {errors.login && <span className=\"error\">{errors.login.message}</span>}\r\n                </form>\r\n            </article>\r\n        );\r\n    }\r\n}\r\n\r\n\r\nexport default Admin;\r\n","import firebase from \"firebase/app\";\r\nimport \"firebase/database\"\r\nimport \"firebase/analytics\"\r\nimport \"firebase/auth\"\r\nimport \"firebase/storage\"\r\n\r\n// Your web app's Firebase configuration\r\n// For Firebase JS SDK v7.20.0 and later, measurementId is optional\r\nlet firebaseConfigProduction = {\r\n    apiKey: \"AIzaSyDukwIPf4Dq16dqVbw4SeoyWugUnPIhYFE\",\r\n    authDomain: \"rally-trip.firebaseapp.com\",\r\n    databaseURL: \"https://rally-trip.firebaseio.com\",\r\n    projectId: \"rally-trip\",\r\n    storageBucket: \"rally-trip.appspot.com\",\r\n    messagingSenderId: \"981127527542\",\r\n    appId: \"1:981127527542:web:d6bee115407fff00b1f357\",\r\n    measurementId: \"G-3Q5HDZ04H2\"\r\n};\r\n\r\n\r\n// let firebaseConfigDevelopment = {\r\n//     apiKey: \"AIzaSyB2sTZWeYTKMQmoyMWKNr8pYil0ZOkrUrk\",\r\n//     authDomain: \"rally-trip-dev.firebaseapp.com\",\r\n//     databaseURL: \"https://rally-trip-dev.firebaseio.com\",\r\n//     projectId: \"rally-trip-dev\",\r\n//     storageBucket: \"rally-trip-dev.appspot.com\",\r\n//     messagingSenderId: \"45699978518\",\r\n//     appId: \"1:45699978518:web:e9ec13a6261e93ccafac37\",\r\n//     measurementId: \"G-RDDKEQ1EN7\"\r\n//   };\r\n\r\n\r\n// Initialize Firebase\r\nfirebase.initializeApp(firebaseConfigProduction);\r\nfirebase.analytics();\r\n\r\nlet fireDb = firebase.database();\r\nlet fireAuth = firebase.auth();\r\nlet fireStorage = firebase.storage();\r\n\r\nexport { firebase, fireDb, fireAuth, fireStorage };","import React from 'react';\r\nimport Backdrop from '../BackDrop/BackDrop';\r\nimport './Loader.css';\r\n\r\n\r\nconst Loader = ({ fullscreen }) => {\r\n    if (fullscreen) {\r\n        return (\r\n            <>\r\n                <div className='loader fullscreen' > </div>\r\n                <Backdrop />\r\n            </>\r\n        );\r\n    } else {\r\n        return (\r\n            <div className='loader' />\r\n        );\r\n    }\r\n\r\n}\r\n\r\nexport default Loader;\r\n"],"sourceRoot":""}